<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Chicago artists portrait</title>

    <!-- Bootstrap -->
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <script src="participantsArray.js" type="text/javascript"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <style>
  #mapd { height: 180px; }
  </style>
  <body>
    <div class="blog-masthead">
          <div class="container">
            <h1>A Map of Chicago Artists Portrait</h1>
            <h1>Photo by Jason Lazarus</h1>
          </div>
        </div>
  <div class="container">
    <div class="row">
  <div class="col-md-6"><div id="map" style="width: 500px; height: 500px"></div></div>
  <div class="col-md-6">
    <p><input type="text" id="tags"><button onclick="showLatLon();">Show</button></p>
    <p id=listParticipants></p>
  </div>
</div>
</div>



     <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

     <script>
    var showLon=0;
    var showLat=0;
		var map = L.map('map', {
       //maxZoom: 5,
        //minZoom: 1
        crs: L.CRS.Simple
    }).setView([-80, 110], 2);
//var map = L.map('map').setView([0, 0], 2);
    //map.setMaxBounds(new L.LatLngBounds([0,500], [500,0]));

  //  var imageUrl = 'SmallVersionChicagoArtistGroupPortrait5mb.jpg'
    //var imageBounds = [[250,0], [0,250]];

    //L.imageOverlay(imageUrl, imageBounds).addTo(map);
    L.tileLayer('tiles/{z}-{x}-{y}.jpg', {
        minZoom: 0,
        maxZoom: 5,
        //attribution: 'ESO/INAF-VST/OmegaCAM',
        tms: false,
        continuousWorld:true
    }).addTo(map);

		//L.marker([100, 33]).addTo(map)

			//.bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();

  for (var i = 0, len = participants.length; i < len; i++) {

    if  (participants[i].lat != null)
    {
    L.polygon([
      [(participants[i].lat+0.5), (participants[i].lon+0.5)],
      [(participants[i].lat+0.5), (participants[i].lon-0.5)],
      [(participants[i].lat-0.5), (participants[i].lon-0.5)],
      [(participants[i].lat-0.5), (participants[i].lon+0.5)]
    ]).addTo(map).bindPopup(participants[i].value);
    }
  }



		var popup = L.popup();

  /*  L.geoJson(participants, {

			filter: function (feature, layer) {
				if (feature.properties) {
					// If the property "underConstruction" exists and is true, return false (don't render features under construction)
					return feature.properties.underConstruction !== undefined ? !feature.properties.underConstruction : true;
				}
				return false;
			},

			onEachFeature: onEachFeature
		}).addTo(map);
*/

		function onMapClick(e) {
			popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at " + e.latlng.toString())
				.openOn(map);
		}

		map.on('click', onMapClick);
    function showLatLon()
    {
      map.panTo(L.latLng(showLat,showLon ));
      map.setZoom(5);
    }


	</script>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
$(function() {


  $( "#tags" ).autocomplete({
  source: participants,
  focus: function( event, ui ) {
    showLat= ui.item.lat ;
    showLon= ui.item.lon ;
  },
  select: function( event, ui ) {
    showLat= ui.item.lat ;
    showLon= ui.item.lon ;
  }
});

});
</script>
  </body>
</html>
