<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>A map of Chicago Artists Portrait</title>

    <!-- Bootstrap -->
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <script src="participantsArray.js" type="text/javascript"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <style>
  #mapd { height: 180px; }
  </style>
  <body>
    <div class="blog-masthead">
          <div class="container">
            <h1>A Map of Chicago Artists Group Portrait</h1>
            <h1>Photo by Jason Lazarus</h1>
          </div>
        </div>
  <div class="container">
    <div class="row">
  <div class="col-md-6"><div id="map" style="width: 500px; height: 500px"></div></div>
  <div class="col-md-6">
    <p><input type="text" id="tags"><button onclick="showLatLon();">Show</button></p>
    <p>About the photo on  <a href="http://jasonlazarus.com/project_3_495/2004present">Jason Lazaus site</a><br>
    About the photo on <a href="https://archive.org/details/ChicagoArtistGroupPortrait2015">Archive.org</a><br>
    This map <s>was</s> is being created by <a href="http://dubster.com">Dubi Kaufmann</a><br>
    The source code is on <a href="https://github.com/dubster2k/dubster2k.github.io/tree/master/chicagoartistsphoto">Github</a><br>
    A spread sheet with <a href="https://docs.google.com/spreadsheets/d/11XJtPkqNhz771uD_zByYI8hveJGcrZd97GsEA1kdfMM/edit?usp=sharing">a list of names and coodinates</a> (latitude and longitude) <br></p>
    <p> To get the coordinates of a place in the photo click on it.</p>
    <p>
  </div>
</div>
</div>
<div class="container">
  <div class="row">
<div class="col-md-6"><b>On the Map</b><p id=listParticipantsDone></p></div>
<div class="col-md-6"><b>Missing from the Map</b><p id=listParticipantsMissing></p></div>


</div>
</div>




     <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

     <script>
    var participantsDone=" ";
    var participantsMissing=" ";
    var showLon=0;
    var showLat=0;
		var map = L.map('map', {
       //maxZoom: 5,
        //minZoom: 1
        crs: L.CRS.Simple
    }).setView([-80, 110], 2);
    L.tileLayer('tiles/{z}-{x}-{y}.jpg', {
        minZoom: 0,
        maxZoom: 5,
        //attribution: 'ESO/INAF-VST/OmegaCAM',
        tms: false,
        continuousWorld:true
    }).addTo(map);

  for (var i = 0, len = participants.length; i < len; i++) {

    if  (participants[i].lat != null)
    {
    L.polygon([
      [(participants[i].lat+0.5), (participants[i].lon+0.5)],
      [(participants[i].lat+0.5), (participants[i].lon-0.5)],
      [(participants[i].lat-0.5), (participants[i].lon-0.5)],
      [(participants[i].lat-0.5), (participants[i].lon+0.5)]
    ]).addTo(map).bindPopup(participants[i].value);
    participantsDone=participantsDone+" "+participants[i].value;
    }
    else {
      {participantsMissing=participantsMissing+" "+participants[i].value;}
    }
  }



		var popup = L.popup();



		function onMapClick(e) {
			popup
				.setLatLng(e.latlng)
				.setContent("The coorinates are" + e.latlng.toString())
				.openOn(map);
		}

		map.on('click', onMapClick);
    function showLatLon()
    {
      map.panTo(L.latLng(showLat,showLon ));
      map.setZoom(5);
    }


	</script>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
$(function() {

  $("#listParticipantsDone").html(participantsDone);
  $("#listParticipantsMissing").html(participantsMissing);
  $( "#tags" ).autocomplete({
  source: participants,
  focus: function( event, ui ) {
    showLat= ui.item.lat ;
    showLon= ui.item.lon ;
  },
  select: function( event, ui ) {
    showLat= ui.item.lat ;
    showLon= ui.item.lon ;
  }
});

});
</script>
  </body>
</html>
